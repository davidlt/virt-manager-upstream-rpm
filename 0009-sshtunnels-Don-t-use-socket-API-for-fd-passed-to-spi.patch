From: Cole Robinson <crobinso@redhat.com>
Date: Sat, 11 Apr 2015 23:04:03 -0400
Subject: [PATCH virt-manager] sshtunnels: Don't use socket API for fd passed
 to spice (bug 1135808)

---
 virtManager/sshtunnels.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/virtManager/sshtunnels.py b/virtManager/sshtunnels.py
index 3a338a4..3cd0182 100644
--- a/virtManager/sshtunnels.py
+++ b/virtManager/sshtunnels.py
@@ -141,7 +141,7 @@ class _Tunnel(object):
         self._outfds = socket.socketpair()
         self._errfds = socket.socketpair()
 
-        return self._outfds[0].fileno(), self._launch_tunnel, ginfo
+        return os.dup(self._outfds[0].fileno()), self._launch_tunnel, ginfo
 
     def close(self):
         if self.closed:
